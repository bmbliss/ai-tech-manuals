<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="bg-white shadow sm:rounded-lg">
    <div class="px-4 py-5 sm:p-6">
      <div class="space-y-4">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-lg font-medium text-gray-900">
              Revision by <%= @revision.created_by.email %>
            </h3>
            <p class="mt-1 text-sm text-gray-500">
              Created <%= time_ago_in_words(@revision.created_at) %> ago
            </p>
          </div>
          <div class="flex items-center gap-4">
            <% if @revision.status == 'pending' %>
              <%= button_to "Approve", approve_manual_section_revision_path(@manual, @section, @revision), 
                  method: :post,
                  class: "px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700" %>
              <%= button_to "Reject", reject_manual_section_revision_path(@manual, @section, @revision), 
                  method: :post,
                  class: "px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700" %>
            <% end %>
          </div>
        </div>

        <div class="prose max-w-none">
          <h4>Change Description:</h4>
          <p><%= @revision.change_description %></p>
        </div>

        <div class="space-y-6">
          <div class="border rounded-md p-4">
            <h4 class="text-sm font-medium text-gray-700 mb-2">Raw Changes:</h4>
            <div class="diff-view">
              <%= @diff[:raw].html_safe %>
            </div>
          </div>
        </div>

        <style>
          .diff-view ins {
            background-color: #d1fae5;
            text-decoration: none;
            color: #065f46;
          }
          
          .diff-view del {
            background-color: #fee2e2;
            text-decoration: line-through;
            color: #991b1b;
          }
        </style>

        <%= render "comments", revision: @revision %>
      </div>
    </div>
  </div>
</div> 